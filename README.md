# api-test-task

## Задача
Есть файл (https://yadi.sk/d/NG-huzs-X-5U5Q) с данными по рекомендациям одних товаров к другим, по одной рекомендации на строку:
>sku1,recom1,0.1
>
>sku2,recom2,0.2
>
>…

Последний столбец содержит вероятность правильной рекомендации, то есть “близость” рекомендованного товара к исходному (чем больше значение — тем больше “близость”). 

Важно: хотя, в указанном файле кол-во рекомендаций на один товар не превышает 50, оно может быть соразмерно кол-ву самих товаров.

Написать Web API на Python с одним эндпоинтом, который принимает sku в качестве параметра и возвращает список всех товаров, рекомендованных для этого sku. Должна быть возможность указать опциональный параметр минимального порога близости для рекомендаций. 
Продумать стратегию масштабирования сервиса при увеличении нагрузки, а также дать примерную оценку потребления ресурсов в случае, если размер данных по рекомендациям начнет расти.

## Логика работы api

Эндпоинт
- /sku?rate=0.6

**sku** - Наименование sku _(обязательный)_ \
**rate** - Параметр рекомендации, при его наличии определяется минимальный порог близости для рекомендации.

Пример GET запроса

> 127.0.0.1:8000/WP260qJAo6?rate=1.0

## Описание работы

При запуске скрипта сервера, происходит сканирование файла csv с товарами и значениями рекомендаций. Хранение данных происходит в оперативной памяти сервера.\
При GET-запросе происходит поиск по ключу (sku) в словаре. Если указан параметр в URL, то происходит фильтрация значений в словаре в соответствии с указаным значением. \
JSON-ответ:
`{ sku: [[sku2, 0.6], [sku3, 0.3]] }`

## Запуск приложения

- Скопировать recommends.csv в корень программы
- Выполнить `docker-compose up`
- Выполнить запрос: `127.0.0.1:8000/WP260qJAo6`